<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Track Cases - Resolve It</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
        :root {
            --bg-900: #071428;
            --bg-800: #0b2540;
            --teal: #2bb8b8;
            --accent: #f5c76b;
            --glass: rgba(255,255,255,0.06);
            --card: rgba(255,255,255,0.04);
            --muted: #b6c2cc;
            --glass-border: rgba(255,255,255,0.08);
            --shadow: 0 8px 24px rgba(2,8,16,0.45);
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
        }

        body {
            margin: 0;
            background: linear-gradient(180deg, var(--bg-900) 0%, var(--bg-800) 55%);
            color: #e6eef6;
            min-height: 100vh;
        }

        /* NAVBAR */
        .navbar-modern {
            background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
            backdrop-filter: blur(6px);
            border-bottom: 1px solid rgba(255,255,255,0.04);
            box-shadow: 0 6px 20px rgba(2,8,16,0.5);
        }
        .navbar .nav-link { color: rgba(230,238,246,0.9); transition: color .15s; }
        .navbar .nav-link:hover { color: var(--accent); }
        .brand-icon {
            background: linear-gradient(135deg, var(--teal), #4fcbd6);
            padding: 6px;
            border-radius: 8px;
            margin-right: 8px;
            display: inline-flex;
            box-shadow: 0 6px 18px rgba(43,184,184,0.14);
        }
        .brand-text {
            font-weight: 700;
            color: #fff;
            letter-spacing: .4px;
        }

        /* HERO - Minimal version for a list page */
        .hero {
            padding: 100px 0 30px;
            text-align: center;
            background: var(--bg-900);
            border-bottom: 1px solid var(--glass-border);
        }
        .hero h1 {
            color: #fff;
            font-weight: 700;
            font-size: 2.4rem;
        }
        .hero p {
            color: var(--muted);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 12px auto 0;
        }

        /* SECTIONS & TABLE STYLES */
        .section {
            max-width: 1300px;
            margin: 30px auto;
            padding: 30px;
            border-radius: 16px;
            background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
            backdrop-filter: blur(8px);
        }
        .section h2 {
            color: #fff;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .section h2 i {
            color: var(--teal);
        }

        /* Custom Table Styling (for row separation) */
        .table {
            --bs-table-bg: var(--card);
            --bs-table-color: #e6eef6;
            --bs-table-striped-bg: rgba(255,255,255,0.05);
            --bs-table-hover-bg: rgba(255,255,255,0.1);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--glass-border);
        }
        .table-dark {
            --bs-table-bg: var(--bg-800);
            --bs-table-color: #fff;
            --bs-table-border-color: var(--glass-border);
        }
        .table > :not(caption) > * > * {
            border-bottom-width: 1px;
            border-color: var(--glass-border);
            font-weight: 500;
        }

        /* Status colors */
        .status-open {
            color: var(--accent);
            font-weight: 600;
        }
        .status-resolved {
            color: #10b981;
            font-weight: 600;
        }
        .status-in-progress {
            color: var(--teal);
            font-weight: 600;
        }

        .case-desc {
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--muted);
        }

        /* Action Buttons */
        .btn-primary {
            --bs-btn-bg: var(--teal);
            --bs-btn-border-color: var(--teal);
            --bs-btn-hover-bg: #4fcbd6;
            --bs-btn-hover-border-color: #4fcbd6;
            --bs-btn-active-bg: #22a0a0;
            --bs-btn-active-border-color: #22a0a0;
            --bs-btn-color: var(--bg-900);
            font-weight: 600;
        }
        .btn-secondary {
            --bs-btn-bg: rgba(255,255,255,0.15);
            --bs-btn-border-color: rgba(255,255,255,0.2);
            --bs-btn-hover-bg: rgba(255,255,255,0.25);
            --bs-btn-hover-border-color: rgba(255,255,255,0.3);
            --bs-btn-color: #e6eef6;
            font-weight: 600;
        }

    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-modern fixed-top">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="/resolve-it-through-mediation">
      <span class="brand-icon">
        <img src="https://img.icons8.com/ios-filled/24/ffffff/scales.png" alt="logo" style="width:18px;height:18px"/>
      </span>
      <span class="brand-text">ResolveIt</span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav align-items-center">
        <li class="nav-item"><a class="nav-link" href="/user/meetings">My Meetings</a></li>
        <li class="nav-item"><a class="nav-link" href="/resolve-it-through-mediation">Home</a></li>
      </ul>
    </div>
  </div>
</nav>

<section class="hero">
  <div class="hero-content">
    <h1>Track Your Cases</h1>
    <p>Monitor and interact with your mediation cases and their current status.</p>
  </div>
</section>

<div class="container">
  <div class="section">
    <h2><i class="bi bi-folder2-open"></i> All Cases</h2>

    <table class="table table-striped table-hover align-middle">
      <thead class="table-dark">
      <tr>
        <th>Case ID</th>
        <th>Type</th>
        <th>Description</th>
        <th>Status</th>
        <th>Created Date</th>
        <th>Resolved Date</th>
        <th>Mediator</th>
        <th>Opposing Party</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="caseObj : ${cases}">
        <td th:text="${caseObj.case_id}">101</td>
        <td th:text="${caseObj.case_type}">Property Dispute</td>
        <td class="case-desc" th:text="${caseObj.description}">Brief description ...</td>
        <td>
                    <span th:text="${caseObj.status}"
                          th:classappend="${caseObj.status.equals('Resolved')} ? 'status-resolved' : (${caseObj.status.equals('Open')} ? 'status-open' : 'status-in-progress')">Open</span>
        </td>
        <td th:text="${#temporals.format(caseObj.created_at, 'dd MMM yyyy')}">10 Oct 2025</td>
        <td th:text="${caseObj.resolved_at != null ? #temporals.format(caseObj.resolved_at, 'dd MMM yyyy') : '-'}">-</td>
        <td th:text="${caseObj.mediator != null ? caseObj.mediator.firstName + ' ' + caseObj.mediator.lastName : '-'}">Mediator Name</td>
        <td th:text="${caseObj.party2 != null ? caseObj.party2.name : '-'}">Party 2 Name</td>
        <td>
          <a th:href="@{'/cases/' + ${caseObj.case_id}}" class="btn btn-sm btn-primary" title="View Details">
            <i class="bi bi-eye"></i>
          </a>
          <a href="#" class="btn btn-sm btn-secondary" title="Chatbot (Demo)">
            <i class="bi bi-chat-dots"></i>
          </a>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(cases)}">
        <td colspan="9" class="text-center text-muted">No cases found.</td>
      </tr>
      </tbody>
    </table>

  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>